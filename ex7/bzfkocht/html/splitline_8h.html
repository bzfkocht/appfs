<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>APPFS: src/splitline.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">APPFS
   </div>
   <div id="projectbrief">Advanced practical programming for scientists</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">splitline.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Split line into fields Header.  
<a href="#details">More...</a></p>

<p><a href="splitline_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a61d9dba1ad6e24c8658d7236298934f1"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structline__fields.html">line_fields</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a></td></tr>
<tr class="memdesc:a61d9dba1ad6e24c8658d7236298934f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">line filed structure  <a href="#a61d9dba1ad6e24c8658d7236298934f1">More...</a><br/></td></tr>
<tr class="separator:a61d9dba1ad6e24c8658d7236298934f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a043887e7d5443103a4c43ea602fdcc62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#a043887e7d5443103a4c43ea602fdcc62">lfs_free</a> (<a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *lfs)</td></tr>
<tr class="memdesc:a043887e7d5443103a4c43ea602fdcc62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free an LFS data structure.  <a href="#a043887e7d5443103a4c43ea602fdcc62">More...</a><br/></td></tr>
<tr class="separator:a043887e7d5443103a4c43ea602fdcc62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c5171e92dbef61be69494d76ebd701"><td class="memItemLeft" align="right" valign="top"><a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#ac2c5171e92dbef61be69494d76ebd701">lfs_split_line</a> (<a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *lfs, const char *line, const char *comment)</td></tr>
<tr class="memdesc:ac2c5171e92dbef61be69494d76ebd701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a line, return an LFS data structure containing the pointers to the fields.  <a href="#ac2c5171e92dbef61be69494d76ebd701">More...</a><br/></td></tr>
<tr class="separator:ac2c5171e92dbef61be69494d76ebd701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4e35e47b8619dceb0313ac5034da8ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#ab4e35e47b8619dceb0313ac5034da8ab">lfs_fields_used</a> (const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *lfs)</td></tr>
<tr class="memdesc:ab4e35e47b8619dceb0313ac5034da8ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of fields used.  <a href="#ab4e35e47b8619dceb0313ac5034da8ab">More...</a><br/></td></tr>
<tr class="separator:ab4e35e47b8619dceb0313ac5034da8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5619b462766349b65138bf21b59b3b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#abb5619b462766349b65138bf21b59b3b">lfs_field</a> (const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *lfs, int fno)</td></tr>
<tr class="memdesc:abb5619b462766349b65138bf21b59b3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a particular field.  <a href="#abb5619b462766349b65138bf21b59b3b">More...</a><br/></td></tr>
<tr class="separator:abb5619b462766349b65138bf21b59b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb978fca6b480d39cf731fccd0476540"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="splitline_8h.html#acb978fca6b480d39cf731fccd0476540">lfs_print</a> (const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *lfs, FILE *fp)</td></tr>
<tr class="memdesc:acb978fca6b480d39cf731fccd0476540"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print content of LFS structure.  <a href="#acb978fca6b480d39cf731fccd0476540">More...</a><br/></td></tr>
<tr class="separator:acb978fca6b480d39cf731fccd0476540"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Thorsten Koch </dd></dl>
<dl class="section date"><dt>Date</dt><dd>04 Jan 2014 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2015 by Thorsten Koch <a href="#" onclick="location.href='mai'+'lto:'+'koc'+'h@'+'zib'+'.d'+'e'; return false;">koch@<span style="display: none;">.nosp@m.</span>zib.<span style="display: none;">.nosp@m.</span>de</a></dd></dl>
<p>Takes a string, copies it, from the copy removes any non-printabel characters, cuts it off when certain comment characters are found. The remainin string is split into fields separated by whitespace. The an array of string pointers pointing to the beginning of the fields is constructed. Each field is null terminated. </p>

<p>Definition in file <a class="el" href="splitline_8h_source.html">splitline.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a61d9dba1ad6e24c8658d7236298934f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structline__fields.html">line_fields</a> <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="splitline_8h_source.html#l00015">15</a> of file <a class="el" href="splitline_8h_source.html">splitline.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abb5619b462766349b65138bf21b59b3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* lfs_field </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td>
          <td class="paramname"><em>lfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>pointer to field number fno </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fno</td><td>field number (0 &lt;= fno &lt; lfs_used_fields()) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="splitline_8c_source.html#l00173">173</a> of file <a class="el" href="splitline_8c_source.html">splitline.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   assert(<a class="code" href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a>(lfs));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="comment">/* Design decision:</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   assert(fno &gt;= 0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   assert(fno &lt;  lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="comment">/* The above could be dependend on the input.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">    * we have to make sure  it is not.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">    * otherwise:</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">    * if (fno &gt;= lfs-&gt;used) return NULL</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    * problem: we always have to check.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    * Design by contract</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">return</span> lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>[fno];</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="ttc" id="splitline_8c_html_a5b38ceb550148d19294deade6e4f1475"><div class="ttname"><a href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a></div><div class="ttdeci">static bool is_valid(const LFS *lfs)</div><div class="ttdoc">Check whether the LFS data structure is consistent. </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00045">splitline.c:45</a></div></div>
<div class="ttc" id="structline__fields_html_a7243deefb064a3c8884e4211fcee7b74"><div class="ttname"><a href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">line_fields::field</a></div><div class="ttdeci">char ** field</div><div class="ttdoc">array of pointer [size] to the fields of the line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00036">splitline.c:36</a></div></div>
<div class="ttc" id="structline__fields_html_a03ec18fa9b06ddf2e7a4e5ecba511335"><div class="ttname"><a href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">line_fields::used</a></div><div class="ttdeci">int used</div><div class="ttdoc">number of fields used so far </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00034">splitline.c:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4e35e47b8619dceb0313ac5034da8ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfs_fields_used </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td>
          <td class="paramname"><em>lfs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Number of fields (&gt;= 0) </dd></dl>

<p>Definition at line <a class="el" href="splitline_8c_source.html#l00163">163</a> of file <a class="el" href="splitline_8c_source.html">splitline.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   assert(<a class="code" href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a>(lfs));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">return</span> lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="ttc" id="splitline_8c_html_a5b38ceb550148d19294deade6e4f1475"><div class="ttname"><a href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a></div><div class="ttdeci">static bool is_valid(const LFS *lfs)</div><div class="ttdoc">Check whether the LFS data structure is consistent. </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00045">splitline.c:45</a></div></div>
<div class="ttc" id="structline__fields_html_a03ec18fa9b06ddf2e7a4e5ecba511335"><div class="ttname"><a href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">line_fields::used</a></div><div class="ttdeci">int used</div><div class="ttdoc">number of fields used so far </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00034">splitline.c:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a043887e7d5443103a4c43ea602fdcc62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfs_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td>
          <td class="paramname"><em>lfs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="splitline_8c_source.html#l00063">63</a> of file <a class="el" href="splitline_8c_source.html">splitline.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   assert(<a class="code" href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a>(lfs));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   free(lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   free(lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   free(lfs);      </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="ttc" id="splitline_8c_html_a5b38ceb550148d19294deade6e4f1475"><div class="ttname"><a href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a></div><div class="ttdeci">static bool is_valid(const LFS *lfs)</div><div class="ttdoc">Check whether the LFS data structure is consistent. </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00045">splitline.c:45</a></div></div>
<div class="ttc" id="structline__fields_html_a7243deefb064a3c8884e4211fcee7b74"><div class="ttname"><a href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">line_fields::field</a></div><div class="ttdeci">char ** field</div><div class="ttdoc">array of pointer [size] to the fields of the line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00036">splitline.c:36</a></div></div>
<div class="ttc" id="structline__fields_html_a6c4a5fa7b90d143b186f0520bbc0e01b"><div class="ttname"><a href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line_fields::line</a></div><div class="ttdeci">char * line</div><div class="ttdoc">pointer to the input line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00035">splitline.c:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb978fca6b480d39cf731fccd0476540"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lfs_print </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td>
          <td class="paramname"><em>lfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Useful for debugging purposes </p>

<p>Definition at line <a class="el" href="splitline_8c_source.html#l00197">197</a> of file <a class="el" href="splitline_8c_source.html">splitline.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   assert(<a class="code" href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a>(lfs));</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   assert(NULL != fp);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a>; i++)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      fprintf(fp, <span class="stringliteral">&quot;Field %3d: \&quot;%s\&quot;\n&quot;</span>, i, lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>[i]);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="ttc" id="splitline_8c_html_a5b38ceb550148d19294deade6e4f1475"><div class="ttname"><a href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a></div><div class="ttdeci">static bool is_valid(const LFS *lfs)</div><div class="ttdoc">Check whether the LFS data structure is consistent. </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00045">splitline.c:45</a></div></div>
<div class="ttc" id="structline__fields_html_a7243deefb064a3c8884e4211fcee7b74"><div class="ttname"><a href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">line_fields::field</a></div><div class="ttdeci">char ** field</div><div class="ttdoc">array of pointer [size] to the fields of the line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00036">splitline.c:36</a></div></div>
<div class="ttc" id="structline__fields_html_a03ec18fa9b06ddf2e7a4e5ecba511335"><div class="ttname"><a href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">line_fields::used</a></div><div class="ttdeci">int used</div><div class="ttdoc">number of fields used so far </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00034">splitline.c:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2c5171e92dbef61be69494d76ebd701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a>* lfs_split_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="splitline_8h.html#a61d9dba1ad6e24c8658d7236298934f1">LFS</a> *&#160;</td>
          <td class="paramname"><em>lfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>comment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">lfs</td><td>a previous used LFS or NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">line</td><td>the input line to process </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">comment</td><td>a list of characters that ends the part of the line to be processed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="splitline_8c_source.html#l00074">74</a> of file <a class="el" href="splitline_8c_source.html">splitline.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   assert(NULL != <a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   assert(NULL != comment);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="comment">/* Do we need a new LFS data structure?</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keywordflow">if</span> (NULL == lfs)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      lfs        = calloc(1, <span class="keyword">sizeof</span>(*lfs));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a>  = <a class="code" href="splitline_8c.html#afe78afd8d9b040637049b44ae44bd6cd">LFS_INITIAL_SIZE</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a> = calloc((<span class="keywordtype">size_t</span>)lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a>, <span class="keyword">sizeof</span>(*lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">else</span> <span class="comment">/* no, just free the old line */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      assert(<a class="code" href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a>(lfs));</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a> = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      free(lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a> = strdup(<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>); </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="comment">/* clip the line at the first occurence of a character from the comment string</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordtype">char</span>* s = strpbrk(lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>, comment); </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   <span class="keywordflow">if</span> (NULL != s) <span class="comment">/* else line is not terminated or too long */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      *s = <span class="charliteral">&#39;\0&#39;</span>;  <span class="comment">/* clip comment */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;       </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="comment">/* Check for garbage characters and remove them, this includes &quot;\n&quot;, &quot;\r&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordflow">for</span>(s = lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>; *s != <span class="charliteral">&#39;\0&#39;</span>; s++)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (!isprint(*s))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         *s = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="comment">/* We have out line and skip over initial white space</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keywordflow">for</span>(s = lfs-&gt;<a class="code" href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line</a>; isspace(*s); s++)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      ;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="comment">/* As long as there is something left from the linem, do</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keywordflow">while</span>(*s != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      assert(lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a> &lt;= lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="comment">/* If we are running out of space, we increase the allocation</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> (lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a> == lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a>)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;         lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a> *= 2;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a> = realloc(lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>, <span class="keyword">sizeof</span>(*lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>) * (<span class="keywordtype">size_t</span>)lfs-&gt;<a class="code" href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">size</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      assert(!isspace(*s));</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">/* start the new field</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      lfs-&gt;<a class="code" href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">field</a>[lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a>] = s;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      lfs-&gt;<a class="code" href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">used</a>++;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">/* As long as we are not at the end and not running into white space</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">       * we proceed. </span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">while</span>(*s != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; !isspace(*s))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;         s++;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="comment">/* We are at the end of the field. Either the input string is</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">       * at the end anyway, ...</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> (*s != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <span class="comment">/* ... or, we add a &#39;\0&#39; and skip any whitespace to the next field</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">          */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         *s++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         <span class="keywordflow">while</span>(isspace(*s))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            s++;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="keywordflow">return</span> lfs;   </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="ttc" id="splitline_8c_html_a5b38ceb550148d19294deade6e4f1475"><div class="ttname"><a href="splitline_8c.html#a5b38ceb550148d19294deade6e4f1475">is_valid</a></div><div class="ttdeci">static bool is_valid(const LFS *lfs)</div><div class="ttdoc">Check whether the LFS data structure is consistent. </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00045">splitline.c:45</a></div></div>
<div class="ttc" id="structline__fields_html_a7243deefb064a3c8884e4211fcee7b74"><div class="ttname"><a href="structline__fields.html#a7243deefb064a3c8884e4211fcee7b74">line_fields::field</a></div><div class="ttdeci">char ** field</div><div class="ttdoc">array of pointer [size] to the fields of the line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00036">splitline.c:36</a></div></div>
<div class="ttc" id="structline__fields_html_a03ec18fa9b06ddf2e7a4e5ecba511335"><div class="ttname"><a href="structline__fields.html#a03ec18fa9b06ddf2e7a4e5ecba511335">line_fields::used</a></div><div class="ttdeci">int used</div><div class="ttdoc">number of fields used so far </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00034">splitline.c:34</a></div></div>
<div class="ttc" id="structline__fields_html_a327ce37c1d16f692a0c2d5a14884bbbd"><div class="ttname"><a href="structline__fields.html#a327ce37c1d16f692a0c2d5a14884bbbd">line_fields::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">maximum number of fields allocated </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00033">splitline.c:33</a></div></div>
<div class="ttc" id="splitline_8c_html_afe78afd8d9b040637049b44ae44bd6cd"><div class="ttname"><a href="splitline_8c.html#afe78afd8d9b040637049b44ae44bd6cd">LFS_INITIAL_SIZE</a></div><div class="ttdeci">#define LFS_INITIAL_SIZE</div><div class="ttdoc">initial allocation size of the line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00039">splitline.c:39</a></div></div>
<div class="ttc" id="structline__fields_html_a6c4a5fa7b90d143b186f0520bbc0e01b"><div class="ttname"><a href="structline__fields.html#a6c4a5fa7b90d143b186f0520bbc0e01b">line_fields::line</a></div><div class="ttdeci">char * line</div><div class="ttdoc">pointer to the input line </div><div class="ttdef"><b>Definition:</b> <a href="splitline_8c_source.html#l00035">splitline.c:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 11 2015 16:03:51 for APPFS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
